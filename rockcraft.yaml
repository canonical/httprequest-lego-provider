# Copyright 2024 Canonical Ltd.
# See LICENSE file for licensing details.

name: httprequest-lego-provider
base: ubuntu:22.04
version: "0.1"
summary: A Django application implementing HTTPRequest Lego Provider
description: |
    A Django application implementing [HTTPRequest Lego Provider]
    (https://go-acme.github.io/lego/dns/httpreq/)
license: Apache-2.0
platforms:
    amd64:

# To ensure the django-framework extension works properly, your Django application
# should have an `wsgi.py` file with an `application` object as the WSGI entrypoint.
extensions:
    - django-framework

parts:
    # Exclude pyproject.yaml so that the python plugin doesn't handle this project as a package
    django-framework/dependencies:
        override-build: |
            rm pyproject.toml
            craftctl default
    django-framework/install-app:
        prime:
            - "django/app/httprequest_lego_provider"
            - "django/app/app"
            - "django/app/LICENSE"
            - "django/app/manage.py"
            - "django/app/requirements.txt"
